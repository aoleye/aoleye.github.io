<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Cloudflare免费网站防护，普遍规则设置，CF防CC攻击规则，waf规则，cloudflare网站防攻击</title>
      <link href="/2024/08/06/cloudflareccwaf1/"/>
      <url>/2024/08/06/cloudflareccwaf1/</url>
      
        <content type="html"><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>网站趋于稳定，又迎来nginx调优，先和大家分享我CF的 WAF规则，因为这个是最有效的防御，能抵御大量脚本小子的恶意攻击流量，已经被我验证数月。</p><p>在海外做独立站电商网站首选CF的CDN服务，因为太强大了，没有之一。中小型需求不多直接免费到爽。接入后网站加速防护全全交给CF了。最稳的选择。</p><p>开始吧！</p><h2 id="进入-WAF配置页"><a href="#进入-WAF配置页" class="headerlink" title="进入 WAF配置页"></a>进入 WAF配置页</h2><ul><li><p>进入CF的后台，选择你要防御的站点域名。</p></li><li><p><a href="https://dash.cloudflare.com/login/">https://dash.cloudflare.com/login/</a></p></li><li><p>记得在DNS选项，开启小云朵。这就开启CDN了，后续防御规则才会生效。<br> <img src="https://tc.izhan.cc/i/2024/07/08/gqm1dk.jpeg" alt="Test"></p></li><li><p>选择安全性 WAF<br> <img src="https://tc.izhan.cc/i/2024/07/08/gqtgpk.jpeg" alt="Test"></p></li><li><p>四个WAF规则，一般大家就三个规则。放行自己，放行SEO爬虫，质询刻意流量。</p></li><li><p>添加规则<br> <img src="https://tc.izhan.cc/i/2024/07/08/grr6tm.jpeg" alt="Test"></p></li><li><p>选择正则表达式添加规则，复制规则保存即可。</p></li></ul><h2 id="放行爬虫seo和自己"><a href="#放行爬虫seo和自己" class="headerlink" title="放行爬虫seo和自己"></a>放行爬虫seo和自己</h2><ul><li><p>以下列出三个规则的正则表达式</p></li><li><p>第一个放行自己原站IP，跟相连有关的ip放行</p></li><li><p>IPV4和IPV6地址改成自己</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(ip.src eq <span class="number">192.168</span><span class="number">.7</span><span class="number">.17</span>) or (ip.src eq <span class="number">2901</span>:c080:<span class="number">1110</span>:<span class="number">4</span>c91:<span class="number">5400</span>:<span class="number">4f</span>f:feb8:<span class="number">130</span>a)...</span><br></pre></td></tr></table></figure></li><li><p>选择操作跳过按图设置，随后保存规则<br> <img src="https://tc.izhan.cc/i/2024/07/08/gug2uy.jpeg" alt="Test"></p></li><li><p>第二个放行SEO爬虫</p></li><li><p>无脑复制即可，无需修改，</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(cf.client.bot) or (http.user_agent contains <span class="string">&quot;duckduckgo&quot;</span>) or (http.user_agent contains <span class="string">&quot;facebookexternalhit&quot;</span>) or (http.user_agent contains <span class="string">&quot;Feedfetcher-Google&quot;</span>) or (http.user_agent contains <span class="string">&quot;LinkedInBot&quot;</span>) or (http.user_agent contains <span class="string">&quot;Mediapartners-Google&quot;</span>) or (http.user_agent contains <span class="string">&quot;msnbot&quot;</span>) or (http.user_agent contains <span class="string">&quot;Slackbot&quot;</span>) or (http.user_agent contains <span class="string">&quot;TwitterBot&quot;</span>) or (http.user_agent contains <span class="string">&quot;ia_archive&quot;</span>) or (http.user_agent contains <span class="string">&quot;yahoo&quot;</span>)...</span><br></pre></td></tr></table></figure></li><li><p>操作也选择跳过，随后保存</p></li></ul><h2 id="质询恶意流量规则"><a href="#质询恶意流量规则" class="headerlink" title="质询恶意流量规则"></a>质询恶意流量规则</h2><ul><li><p>至关重要。但也很简单。地域限制，HTTP版本限制都十分管用。在之前大佬的基础上进化规则。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(cf.threat_score ge <span class="number">5</span> and not cf.client.bot) or (not http.request.version in &#123;<span class="string">&quot;HTTP/2&quot;</span> <span class="string">&quot;HTTP/3&quot;</span>&#125;) or (not ip.geoip.country in &#123;<span class="string">&quot;AU&quot;</span> <span class="string">&quot;CA&quot;</span> <span class="string">&quot;FR&quot;</span> <span class="string">&quot;DE&quot;</span> <span class="string">&quot;HK&quot;</span> <span class="string">&quot;IR&quot;</span> <span class="string">&quot;JP&quot;</span> <span class="string">&quot;KR&quot;</span> <span class="string">&quot;MY&quot;</span> <span class="string">&quot;SG&quot;</span> <span class="string">&quot;TW&quot;</span> <span class="string">&quot;GB&quot;</span> <span class="string">&quot;US&quot;</span> <span class="string">&quot;CN&quot;</span>&#125;)...</span><br></pre></td></tr></table></figure></li><li><p>这些大写字母是国家或地区的简称，在其中的都是放行的国家。如果你只在香港做业务可以只填写HK，其余的全部会进入质询拦截模式，俗称CF的5秒盾。<br> <img src="https://tc.izhan.cc/i/2024/07/08/gy9zwy.jpeg" alt="Test"></p></li><li><p>后续观察</p></li><li><p>这一波设置基本就ok了。可以放几天试试，观察放行和拦截情况。</p></li></ul><h2 id="频率限制"><a href="#频率限制" class="headerlink" title="频率限制"></a>频率限制</h2><ul><li>对了还有频率限制，也很关键。<br> <img src="https://tc.izhan.cc/i/2024/07/08/gziu7h.jpeg" alt="Test"><br> <img src="https://tc.izhan.cc/i/2024/07/08/gzj423.jpeg" alt="Test"><br> <img src="https://tc.izhan.cc/i/2024/07/08/gzj62f.jpeg" alt="Test"></li></ul><p>转载来自：<a href="https://blog.kejilion.pro/">https://blog.kejilion.pro</a>  效果自行考证。</p>]]></content>
      
      
      <categories>
          
          <category> 分享交流 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloudflare </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>宝塔面板国际版aaPanel安装保姆级教程,国际版宝塔安装,国际版宝塔一键安装命令</title>
      <link href="/2024/08/06/aaPanel/"/>
      <url>/2024/08/06/aaPanel/</url>
      
        <content type="html"><![CDATA[<h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><ul><li>SSH连接上服务器，确定操作系统的环境是纯净的，没有配置过其他环境。</li><li>推荐工具：<code>Xshell</code> 和 <code>FinalShell</code></li></ul><h2 id="Centos系统命令"><a href="#Centos系统命令" class="headerlink" title="Centos系统命令"></a>Centos系统命令</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh http:<span class="comment">//www.aapanel.com/script/install_6.0_en.sh &amp;&amp; bash install.sh aapanel</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#至centos停止维护后，需要先更换源才能使用此命令</span></span><br></pre></td></tr></table></figure><h2 id="Ubuntu系统命令"><a href="#Ubuntu系统命令" class="headerlink" title="Ubuntu系统命令"></a>Ubuntu系统命令</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O install.sh http:<span class="comment">//www.aapanel.com/script/install-ubuntu_6.0_en.sh &amp;&amp; sudo bash install.sh aapanel</span></span><br></pre></td></tr></table></figure><h2 id="Debian系统命令"><a href="#Debian系统命令" class="headerlink" title="Debian系统命令"></a>Debian系统命令</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O install.sh http:<span class="comment">//www.aapanel.com/script/install-ubuntu_6.0_en.sh &amp;&amp; bash install.sh aapanel</span></span><br></pre></td></tr></table></figure><h2 id="宝塔命令改账号密码"><a href="#宝塔命令改账号密码" class="headerlink" title="宝塔命令改账号密码"></a>宝塔命令改账号密码</h2><ul><li>终端输入：bt</li><li>然后发：14 </li><li>一般改账号是：6</li><li>然后密码是：5</li></ul>]]></content>
      
      
      <categories>
          
          <category> 分享交流 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 宝塔面板 </tag>
            
            <tag> aaPanel </tag>
            
            <tag> 国际版宝塔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客，小白的一分钟搭建安装教程</title>
      <link href="/2024/08/06/hexo/"/>
      <url>/2024/08/06/hexo/</url>
      
        <content type="html"><![CDATA[<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul><li>搭建Hexo博客首先要安装<mark class="hl-label default">Node.js</mark>  和<mark class="hl-label default">Git</mark> </li><li><mark class="hl-label default">Node.js</mark>  下载地址 nodejs.org   </li><li><mark class="hl-label default">Git</mark> 下载地址 git-scm.com</li><li>为了方便编辑，还可以安装个<mark class="hl-label default">Visual</mark>  Visual Studio Code</li></ul><hr><h2 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h2><ol><li>安装好后在桌面新建一个文件夹，名字随意。</li><li>在新建的文件夹内右击鼠标 选择打开：<code>Open Git Bash here</code></li><li>切换镜像源目的是为了更快高潮 输入命令： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></li><li>切换后继续输入以下命令 安装Hexo：  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install -g hexo-cli</span><br></pre></td></tr></table></figure></li><li>hexo init 自定义博客名  例如： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure></li><li>执行到这一步，会看到有个 <code>blog</code> 文件夹里面有我们需要的<code>Hexo</code>文件</li><li>注意看是不是在 <code>blog</code> 目录 如果不是输入命令 <code>cd blog</code> 到目录，最简单的就是关闭<code>git</code>然后手动进入<code>blog</code>文件夹在右击鼠标重新打开<code>Open git bash here</code></li><li>然后我们开始测试原始Hexo 是否能运行起来 输入命令： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">生成静态文件：</span><br><span class="line">hexo g </span><br><span class="line"></span><br><span class="line">没有报错继续输入：</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure> 会输出给你个 <a href="http://localhost:4000/">http://localhost:4000</a> 复制到浏览器打开，能正常打开显示 Hexo 原始框架博客即为ojbk</li></ol><h2 id="本地部署完结"><a href="#本地部署完结" class="headerlink" title="本地部署完结"></a>本地部署完结</h2>]]></content>
      
      
      <categories>
          
          <category> 分享交流 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 分享交流，Hexo，Nodejs，Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu系统香港及国外服务器，校正时间为北京/上海</title>
      <link href="/2024/08/06/Ubuntusj/"/>
      <url>/2024/08/06/Ubuntusj/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul><li>购买的香港及海外服务器，默认时间都和国内不一致</li><li>可能会导致使用过程中出现问题，特别是拿来做 支付系统 方面的老板，时间不同步国内可能就出现支付成功不回调不跳转。</li></ul><h2 id="一、查看时区"><a href="#一、查看时区" class="headerlink" title="一、查看时区"></a>一、查看时区</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">date</span> -R</span><br></pre></td></tr></table></figure><p> <strong>+0000 表示第0时区，需要改成第八时区。<br>+0800 表示第八时区，也就是我们的使用时区。</strong> </p><h2 id="二、输入命令"><a href="#二、输入命令" class="headerlink" title="二、输入命令"></a>二、输入命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> tzselect</span><br><span class="line">1、选择：亚洲 Asia</span><br><span class="line"></span><br><span class="line">2、选择：中国 China</span><br><span class="line"></span><br><span class="line">3、选择：北京时间 Beijing Time</span><br><span class="line"></span><br><span class="line">4、确认验证：<span class="built_in">yes</span></span><br></pre></td></tr></table></figure><h2 id="三、复制文件到-etc目录下"><a href="#三、复制文件到-etc目录下" class="headerlink" title="三、复制文件到&#x2F;etc目录下"></a>三、复制文件到&#x2F;etc目录下</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure><h2 id="四、更新时间"><a href="#四、更新时间" class="headerlink" title="四、更新时间"></a>四、更新时间</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ntpdate time.windows.com</span><br></pre></td></tr></table></figure><h2 id="如有报错"><a href="#如有报错" class="headerlink" title="如有报错"></a>如有报错</h2><p> <code>sudo: ntpdate: command not found</code> </p><h2 id="需要进行安装-ntpdate"><a href="#需要进行安装-ntpdate" class="headerlink" title="需要进行安装 ntpdate"></a>需要进行安装 <code>ntpdate</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install ntpdate</span><br></pre></td></tr></table></figure><h2 id="五、修改时间以后，修改硬件CMOS的时间"><a href="#五、修改时间以后，修改硬件CMOS的时间" class="headerlink" title="五、修改时间以后，修改硬件CMOS的时间"></a>五、修改时间以后，修改硬件CMOS的时间</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> hwclock --systohc</span><br></pre></td></tr></table></figure><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p> <strong>ubuntu</strong> 一般安装完用的是UTC时间，Java程序获取时会减8小时。</p><p> <strong>用 <code>timedatectl</code> 命令看一下：</strong> </p><p> <strong>这时要改成GMT时间</strong> </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> timedatectl set-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 分享交流 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> 服务器 </tag>
            
            <tag> 国内时间 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu系统安装docker docker-compos 终端命令一键安装</title>
      <link href="/2024/08/06/Ubuntudocker/"/>
      <url>/2024/08/06/Ubuntudocker/</url>
      
        <content type="html"><![CDATA[<h2 id="安装Docker命令"><a href="#安装Docker命令" class="headerlink" title="安装Docker命令"></a>安装Docker命令</h2><p>在 <code>Ubuntu 20.04</code> 上安装Docker非常简单。您可以使用以下命令来安装 <code>Docker</code> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install docker.io</span><br></pre></td></tr></table></figure><h2 id="使用以下命令启动Docker服务并将其设置为开机自启"><a href="#使用以下命令启动Docker服务并将其设置为开机自启" class="headerlink" title="使用以下命令启动Docker服务并将其设置为开机自启"></a>使用以下命令启动Docker服务并将其设置为开机自启</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl start docker</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure><h2 id="验证Docker"><a href="#验证Docker" class="headerlink" title="验证Docker"></a>验证Docker</h2><p> <strong>运行以下命令，确保Docker已正确安装并正在运行：</strong> </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker --version</span><br><span class="line"><span class="built_in">sudo</span> docker info</span><br></pre></td></tr></table></figure><p> <strong>您应该能够看到Docker版本信息和Docker详细信息。</strong> </p><h2 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker-Compose"></a>Docker-Compose</h2><p> <code>Docker Compose</code> 需要从 <code>GitHub</code> 上获取二进制文件并将其安装到 <code> /usr/local/bin/</code> 目录下。使用以下命令下载最新版本的 <code>Docker Compose</code> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> curl -L <span class="string">&quot;https://github.com/docker/compose/releases/latest/download/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><h2 id="赋予执行权限"><a href="#赋予执行权限" class="headerlink" title="赋予执行权限"></a>赋予执行权限</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><h2 id="验证Docker-Compose安装"><a href="#验证Docker-Compose安装" class="headerlink" title="验证Docker Compose安装"></a>验证Docker Compose安装</h2><p>运行以下命令，确保 <code>Docker Compose</code> 已正确安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure><h2 id="完结"><a href="#完结" class="headerlink" title="完结"></a>完结</h2>]]></content>
      
      
      <categories>
          
          <category> 分享交流 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> Docker docker-compos </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
